!function(e,t){"use strict";angular.module("adf.widget.timetracker",["adf.provider","tasker"]).config(["dashboardProvider",function(e){e.widget("timetracker",{title:"Time Tracker",description:"track billable hours to projects",templateUrl:"{widgetsPath}/timetracker/src/view.html",frameless:!0,edit:{templateUrl:"{widgetsPath}/timetracker/src/edit.html"}})}]),angular.module("adf.widget.timetracker").run(["$templateCache",function(e){e.put("{widgetsPath}/timetracker/src/edit.html",'<form role=form><div class=form-group><label for=sample>Sample</label> <input type=text class=form-control id=sample ng-model=config.sample placeholder="Enter sample"></div></form>'),e.put("{widgetsPath}/timetracker/src/view.html",'<embed src=timetracker/angular-time-pausetracker/index.html style=width:100%;min-height:600px;><div id=app><div id=head><div class=circles><div class=progress-wrapper ng-controller=currentPause id=pause><div class="progress pause" ng-show="run === false">{{currentText}}</div><div round-progress max=max current=current color=white bgcolor=#262b34 radius=70 stroke=10 semi=false rounded=false clockwise=false responsive=false duration=2400 animation=easeInOutQuart ng-class={dimmedpause:run}></div></div><div class=progress-wrapper ng-controller=currentTask><div class="progress task" ng-show="run === true">{{currentText}}</div><div round-progress max=max current=current color=#00c0ff bgcolor=#262b34 radius=70 stroke=3 semi=false rounded=false clockwise=false responsive=false duration=2400 animation=easeInOutQuart ng-class={dimmedplay:!run}></div></div></div><div class=interaction ng-controller=controls><span class=btn ng-click=startpause()><i class="mdi mdi-pause" ng-show="run === true"></i><i class="mdi mdi-play" ng-show="run === false"></i></span> <span class="btn primary" ng-click=addnote()><i class="mdi mdi-plus"></i></span></div></div><div id=content ng-controller=tasks><div style=text-align:center ng-hide="tasks.length > 0"><h2 style="margin:20px 0 0 0;"><img src=https://lexlab.io/llp_core/img/lll3.svg></h2><h3 style=margin:0;>You have no recorded tasks yet</h3></div><input placeholder=Filter ng-show="tasks.length > 0" type=text id=filter ng-model=taskfilter><ul><li class=list-animation ng-repeat="task in tasks | filter: taskfilter track by $index"><span class=date>{{task.date}}</span> <b>{{task.note}}</b><span class=right><span class=time>{{task.ftime}}</span><span class=pause>{{task.fpause}}</span><i class="mdi mdi-delete" ng-click=delete($index)></i></span></li></ul></div></div>')}]),angular.module("tasker",["angular-svg-round-progress","ngAnimate"]).run(["$rootScope",function(e){e.run=!1,e.hasState=!1}]).controller("tasks",["$scope","taskService",function(e,t){e.tasks=t.getAll(),e["delete"]=function(e){t.remove(e)},$("#content").slimScroll({position:"right",height:"370px",railVisible:!0,alwaysVisible:!0,color:"#00c0ff",wheelStep:7})}]).controller("controls",["$scope","$rootScope","timeService","taskService",function(e,t,r,s){e.startpause=function(){t.run===!1?(t.run=!0,t.hasState=!0):t.run=!1},$("#content").slimScroll({position:"right",height:"370px",railVisible:!0,alwaysVisible:!0,color:"#00c0ff",wheelStep:7}),e.addnote=function(){t.run=!1,t.hasState=!1;var e=prompt("What have you done ?");null!=e&&""!==e.trim()?(s.add(e),t.$broadcast("RESET")):t.hasState=!0}}]).controller("currentPause",["$scope","$rootScope","$interval","timeService",function(e,t,r,s){function n(e){var t="0"+Math.floor(e/60),r="0"+(e-60*t);return t.substr(-2)+":"+r.substr(-2)}e.max=s.getConfig("pause"),e.current=s.getConfig("pause"),e.currentText=n(e.current),e.$on("RESET",function(){e.current=s.getConfig("pause"),e.currentText=n(e.current)}),$("#content").slimScroll({position:"right",height:"370px",railVisible:!0,alwaysVisible:!0,color:"#00c0ff",wheelStep:7}),r(function(){!e.run&&e.hasState&&(e.current<=0&&t.hasState?(document.getElementById("alert").play(),t.hasState=!1):(e.current-=1,e.currentText=n(e.current),s.setPause(e.current)))},1e3)}]).controller("currentTask",["$scope","$rootScope","$interval","timeService",function(e,t,r,s){function n(e){var t="0"+Math.floor(e/60),r="0"+(e-60*t);return t.substr(-2)+":"+r.substr(-2)}e.max=s.getConfig("time"),e.current=s.getConfig("time"),e.currentText=n(e.current),e.$on("RESET",function(){e.current=s.getConfig("time"),e.currentText=n(e.current)}),$("#content").slimScroll({position:"right",height:"370px",railVisible:!0,alwaysVisible:!0,color:"#00c0ff",wheelStep:7}),r(function(){e.run&&e.hasState&&(e.current<=0?(document.getElementById("alert").play(),t.hasState=!1):(e.current-=1,e.currentText=n(e.current),s.setTime(e.current)))},1e3)}]).factory("taskService",["timeService",function(e){var t="",r=[];if(""===t){var s=new Date;t+=s.getDay()+"/"+s.getMonth()+"/"+s.getFullYear()}return{add:function(s){r.push({date:t,note:s,time:e.getWorkedTime(!1),pause:e.getWorkedPause(!1),ftime:e.getWorkedTime(!0),fpause:e.getWorkedPause(!0)}),this.setPersistence()},remove:function(e){r.splice(e,1),this.setPersistence()},getAll:function(){return null===localStorage.getItem("codepen-tasker")&&this.setPersistence(),0===r.length&&this.getPersistence(),r},getPersistence:function(){r=JSON.parse(localStorage.getItem("codepen-tasker"))},setPersistence:function(){localStorage.setItem("codepen-tasker",JSON.stringify(r))}}}]).factory("timeService",[function(){function e(e){var t="0"+Math.floor(e/60),r="0"+(e-60*t);return t.substr(-2)+":"+r.substr(-2)}var t={time:2400,pause:600},r=t.pause,s=t.time;return{reset:function(){r=t.pause,s=t.time},getConfig:function(e){return t[e]},getWorkedPause:function(s){return s?e(t.pause-r):t.pause-r},getWorkedTime:function(r){return r?e(t.time-s):t.time-s},getTime:function(){return s},getPause:function(){return r},setTime:function(e){s=e},setPause:function(e){r=e}}}])}(window);