!function(e,t){"use strict";angular.module("adf.widget.timetracker",["adf.provider","tasker"]).config(["dashboardProvider",function(e){e.widget("timetracker",{title:"Time Tracker",description:"track billable hours to projects",templateUrl:"{widgetsPath}/timetracker/src/view.html",frameless:!0,edit:{templateUrl:"{widgetsPath}/timetracker/src/edit.html"}})}]),angular.module("adf.widget.timetracker").run(["$templateCache",function(e){e.put("{widgetsPath}/timetracker/src/edit.html",'<form role=form><div class=form-group><label for=sample>Sample</label> <input type=text class=form-control id=sample ng-model=config.sample placeholder="Enter sample"></div></form>'),e.put("{widgetsPath}/timetracker/src/view.html","<embed src=timetracker/angular-time-pausetracker/index.html style=width:100%;min-height:600px;>")}]),angular.module("tasker",["angular-svg-round-progress","ngAnimate"]).run(["$rootScope",function(e){e.run=!1,e.hasState=!1}]).controller("tasks",["$scope","taskService",function(e,t){e.tasks=t.getAll(),e["delete"]=function(e){t.remove(e)},$("#content").slimScroll({position:"right",height:"370px",railVisible:!0,alwaysVisible:!0,color:"#00c0ff",wheelStep:7})}]).controller("controls",["$scope","$rootScope","timeService","taskService",function(e,t,r,n){e.startpause=function(){t.run===!1?(t.run=!0,t.hasState=!0):t.run=!1},$("#content").slimScroll({position:"right",height:"370px",railVisible:!0,alwaysVisible:!0,color:"#00c0ff",wheelStep:7}),e.addnote=function(){t.run=!1,t.hasState=!1;var e=prompt("What have you done ?");null!=e&&""!==e.trim()?(n.add(e),t.$broadcast("RESET")):t.hasState=!0}}]).controller("currentPause",["$scope","$rootScope","$interval","timeService",function(e,t,r,n){function i(e){var t="0"+Math.floor(e/60),r="0"+(e-60*t);return t.substr(-2)+":"+r.substr(-2)}e.max=n.getConfig("pause"),e.current=n.getConfig("pause"),e.currentText=i(e.current),e.$on("RESET",function(){e.current=n.getConfig("pause"),e.currentText=i(e.current)}),$("#content").slimScroll({position:"right",height:"370px",railVisible:!0,alwaysVisible:!0,color:"#00c0ff",wheelStep:7}),r(function(){!e.run&&e.hasState&&(e.current<=0&&t.hasState?(document.getElementById("alert").play(),t.hasState=!1):(e.current-=1,e.currentText=i(e.current),n.setPause(e.current)))},1e3)}]).controller("currentTask",["$scope","$rootScope","$interval","timeService",function(e,t,r,n){function i(e){var t="0"+Math.floor(e/60),r="0"+(e-60*t);return t.substr(-2)+":"+r.substr(-2)}e.max=n.getConfig("time"),e.current=n.getConfig("time"),e.currentText=i(e.current),e.$on("RESET",function(){e.current=n.getConfig("time"),e.currentText=i(e.current)}),$("#content").slimScroll({position:"right",height:"370px",railVisible:!0,alwaysVisible:!0,color:"#00c0ff",wheelStep:7}),r(function(){e.run&&e.hasState&&(e.current<=0?(document.getElementById("alert").play(),t.hasState=!1):(e.current-=1,e.currentText=i(e.current),n.setTime(e.current)))},1e3)}]).factory("taskService",["timeService",function(e){var t="",r=[];if(""===t){var n=new Date;t+=n.getDay()+"/"+n.getMonth()+"/"+n.getFullYear()}return{add:function(n){r.push({date:t,note:n,time:e.getWorkedTime(!1),pause:e.getWorkedPause(!1),ftime:e.getWorkedTime(!0),fpause:e.getWorkedPause(!0)}),this.setPersistence()},remove:function(e){r.splice(e,1),this.setPersistence()},getAll:function(){return null===localStorage.getItem("codepen-tasker")&&this.setPersistence(),0===r.length&&this.getPersistence(),r},getPersistence:function(){r=JSON.parse(localStorage.getItem("codepen-tasker"))},setPersistence:function(){localStorage.setItem("codepen-tasker",JSON.stringify(r))}}}]).factory("timeService",[function(){function e(e){var t="0"+Math.floor(e/60),r="0"+(e-60*t);return t.substr(-2)+":"+r.substr(-2)}var t={time:2400,pause:600},r=t.pause,n=t.time;return{reset:function(){r=t.pause,n=t.time},getConfig:function(e){return t[e]},getWorkedPause:function(n){return n?e(t.pause-r):t.pause-r},getWorkedTime:function(r){return r?e(t.time-n):t.time-n},getTime:function(){return n},getPause:function(){return r},setTime:function(e){n=e},setPause:function(e){r=e}}}])}(window);